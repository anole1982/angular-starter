webpackJsonp([7],{"1cOA":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n("WVK8"),r=n("vJEw"),i=n("5pK3");console.log("`Web rtc` component loaded asynchronously");var c=(function(){function t(t){this.cryptoService=t,this.source="你好呀你好嘛你好吗你好哦",this.key="12345678"}return t.prototype.ngOnInit=function(){},t.prototype.onDecryptClick=function(){var t=this.hex2bytes(this.result);console.log(t);var e,n,o;"AES-GCM"==this.cryptoAlgorithm?(e=this.hex2bytes(this.key),console.log(e.length),n={name:"AES-GCM",iv:crypto.getRandomValues(new Uint8Array(12))},o="raw",this.aesDecrypt(e,t,n,o)):"AES-CBC"==this.cryptoAlgorithm?(e=this.hex2bytes("31323334353637383930313233343536"),console.log(e),console.log(e.length),n={name:"AES-CBC",iv:this.hex2bytes("31323334353637383930313233343536")},o="raw",this.aesDecrypt(e,t,n,o)):"AES-CTR"==this.cryptoAlgorithm?(e=this.hex2bytes(this.key),console.log(e.length),n={name:"AES-CTR",counter:crypto.getRandomValues(new Uint8Array(16)),length:2},o="raw",this.aesDecrypt(e,t,n,o)):"RSA-OAEP"==this.cryptoAlgorithm&&(e={alg:"RSA-OAEP-256",d:"io5o-I0dxjVnVhAGZUOVVZe271W0_r7wonGxAY5-9qoLq9ujt5k992V14WRnluXHZ6wMCOXCQENzpx1yEzMt81VJ2lKEo9u66uniUh8Ma9fptwp0h93C5twmCR9n9ja1BUW_XENCo1BJC234jmzE8iOKNoXMNaRdVBqlFYZzwV5r37-_MO2apeGACW6yKIDf4Arr5GOWWtbtTea3UbNfj4dIbHfrSWq1IAqTPY30f60NFMlaAi2tqhhCQu-sePMU0GfMgWilS3-KwFoyTrQKxNz-P5WJxEBlsBvP9TixiUTJOJm8Z-sVvs2dtKSeil4rftP7-_FwOPPFNwNAj5OMQQ",dp:"vsDS2wSKa-Y19hx93nEiJjXvQl5R8dpxWwMHbffJ-eNeoyjkikjnw7tKUsZ0W3ziVGqLR4KZL_JCYE_pgePifx3XGm5Y8TZKg1tbuOIOAEdDZiwcblJrTbfyl_D9gwRItOL7rV3TWFOHbgYKqqRtDQtDSJoNdFyO5TNPwHOHYGc",dq:"HKoT-QnX3yWfsO4VukX1dzIAY4vaaAyO0Z9v9aEbEwAva1cgoCkwnfXBBDS5fiWq2EA7UO2aI1zmw3SkojmXD-V_blVbHiEib79akToLZGXCGmvbQ2yX4gMi3bsj1q0I83VpNfPkyqNkmvK3QtoQB3TL8EW_lUEf7zEWkt4AfYE",e:"AQAB",ext:!0,key_ops:["decrypt"],kty:"RSA",n:"y4lDq1cm-xhN1CJcx_kVUW4GiTaeAdX4dOMcd9rR7fz18j9ehnX8CGuV3IF1Fn1hIa33YBPlFqEgKNyUagZFyjHziNsk10AEz-5DzTDwDZzauxA2o97fYG3g4kAcxMlbehDCR-zOMk45VWOOXWDMXLsKmrjxhnhbTrcZMPdjgmC49M91EO6DHvjHNK79SazSFgS7dmcgLAJv5ZE82tG4NfbiMTE6bq6UdDrr-diNuRHMXSVtT5Z0yY0uT1jkU5pj6xy9CHnkc6gzk_bgDcylNYmjNgE8b5aY7LoDjPXAZuQ5JTPjjq9R4tt33IkbXnhLhKvppziNh8BciJJvfq_Rdw",p:"6vvzhtUbxZYKWONphBGJnQ6rRxM8HcwiE1YSwwFBchVH6r-K6XQRrCluWj8yIqRuxvB9We4ELewoOI-Y1zdEWUq-ss8czB5o_q0UvtSxJfojM5E0A6u4zZ7Ffbg0Btdyzdf6HKNlzBy8WMcaJYTmRJwyd4ttHNt1mQtzwnsPSYc",q:"3b1MuZahRNHLBArWbpXejeJA9AqTGCR32MksZByL2S3C8ms1pOt5z1yN9Yl6pc55ShCLwmJ61PETl248KI7n3wUOYNbyz0wqFscFGBJFFv_0Zusj_0U8okwNkEHMznhfvjKqCwhNT8dpGw3YhfZq5NRZHNFXHcFOFzzZruoadJE",qi:"n-kbNlX6ROgKG_rNndy7IuojhlZBCqmL_di_x92wVFs4qrOJ-okK76dxd6ekqxdUO76UIjUzlsUsCTJsDfMcMSnbu37FlZf7vDEGb2F6FY7gVMyRDS4uOmarHrdMZIt8eymc_Y6jOwmXsEn33f_Uxxmk6YxexVUdGV3R5JEkJw4"},n={name:"rsa-oaep",hash:{name:"sha-256"}},o="jwk")},t.prototype.rasDecrypt=function(t,e,n,o){var r=this;console.log("encryptedKey:"+t),this.cryptoService.importKey(o,t,n,!0,["encrypt"]).then((function(t){return r.cryptoService.encrypt(n,t,e)})).then((function(t){r.result=r.hex(t)}))},t.prototype.aesDecrypt=function(t,e,n,o){var r=this;console.log("encryptedKey::",t),this.cryptoService.digest("SHA-256",t).then((function(e){return r.cryptoService.importKey(o,t,n,!0,["decrypt"])})).then((function(t){return console.log(t),r.cryptoService.decrypt(n,t,e)})).then((function(t){r.decryptHex=r.hex(t),r.decryptText=r.string(r.decryptHex)}))},t.prototype.rasEncrypt=function(t,e,n,o){var r=this;console.log("encryptedKey:"+t),this.cryptoService.importKey(o,t,n,!0,["encrypt"]).then((function(t){return r.cryptoService.encrypt(n,t,e)})).then((function(t){r.result=r.hex(t)}))},t.prototype.aesEncrypt=function(t,e,n,o){var r=this;this.cryptoService.digest("SHA-1",t).then((function(e){return r.cryptoService.importKey(o,t,n,!0,["encrypt"])})).then((function(t){return console.log(t),console.log(e),r.cryptoService.encrypt(n,t,e)})).then((function(t){console.log(t),r.result=r.hex(t)}))},t.prototype.onCreateUserKeyClick=function(){var t,e=this,n={name:"RSA-OAEP",hash:{name:"sha-256"},modulusLength:2048,publicExponent:new Uint8Array([1,0,1])};this.cryptoService.generateKey(n,!0,["encrypt","decrypt"]).then((function(n){return t=n,Promise.all([e.cryptoService.exportKey("jwk",t.publicKey),e.cryptoService.exportKey("jwk",t.privateKey)])})).then((function(t){console.log(t),e.publicKey=t[0],e.privateKey=t[1]}))},t.prototype.onCryptoAlgorithmChange=function(){var t=this.bytes(this.source);console.log(t);var e,n,o;"AES-GCM"==this.cryptoAlgorithm?(e=this.bytes(this.key),console.log(e.length),n={name:"AES-GCM",iv:crypto.getRandomValues(new Uint8Array(12))},o="raw",this.aesEncrypt(e,t,n,o)):"AES-CBC"==this.cryptoAlgorithm?(e=this.hex2bytes("31323334353637383930313233343536"),console.log(e),console.log(e.length),n={name:"AES-CBC",iv:this.hex2bytes("31323334353637383930313233343536")},o="raw",this.aesEncrypt(e,t,n,o)):"AES-CTR"==this.cryptoAlgorithm?(e=this.bytes(this.key),console.log(e.length),n={name:"AES-CTR",counter:crypto.getRandomValues(new Uint8Array(16)),length:2},o="raw",this.aesEncrypt(e,t,n,o)):"RSA-OAEP"==this.cryptoAlgorithm&&(e={alg:"RSA-OAEP-256",e:"AQAB",ext:!0,key_ops:["encrypt"],kty:"RSA",n:"y4lDq1cm-xhN1CJcx_kVUW4GiTaeAdX4dOMcd9rR7fz18j9ehnX8CGuV3IF1Fn1hIa33YBPlFqEgKNyUagZFyjHziNsk10AEz-5DzTDwDZzauxA2o97fYG3g4kAcxMlbehDCR-zOMk45VWOOXWDMXLsKmrjxhnhbTrcZMPdjgmC49M91EO6DHvjHNK79SazSFgS7dmcgLAJv5ZE82tG4NfbiMTE6bq6UdDrr-diNuRHMXSVtT5Z0yY0uT1jkU5pj6xy9CHnkc6gzk_bgDcylNYmjNgE8b5aY7LoDjPXAZuQ5JTPjjq9R4tt33IkbXnhLhKvppziNh8BciJJvfq_Rdw"},n={name:"rsa-oaep",hash:{name:"sha-256"}},o="jwk")},t.prototype.onDigestAlgorithmChange=function(){var t=this,e=this.bytes(this.source);this.cryptoService.digest(this.digestAlgorithm,e).then((function(e){t.result=t.hex(e)}))},t.prototype.hex2bytes=function(t){return new Uint8Array(t.split(/(.{2})/g).filter((function(t){return t.length>0})).map((function(t){return parseInt(t,16)})))},t.prototype.bytes=function(t){return new Uint8Array(encodeURIComponent(t).split("%").filter((function(t,e,n){return t.length>0})).map((function(t){return parseInt(t,16)})))},t.prototype.string=function(t){return decodeURIComponent(t.replace(/(.{2})/g,"%$1"))},t.prototype.hex=function(t){for(var e=[],n=new DataView(t),o=0;o<n.byteLength;o++){var r=n.getUint8(o),i=r<15?"0"+r.toString(16):r.toString(16);e.push(i)}return e.join("")},t=o.b([n.i(r._10)({selector:"webrtc",template:'\n    <article>\n      <header>\n        摘要\n      </header>\n      <input type="text" [(ngModel)]="source">\n      <textarea [(ngModel)]="result"></textarea>\n      <textarea [(ngModel)]="decryptHex"></textarea>\n      <div>{{decryptText}}</div>\n    <div class="select">\n      <label for="digest">算法</label>\n      <select id="digest" [(ngModel)]="digestAlgorithm" (change)="onDigestAlgorithmChange()">\n        <option>请选择</option>\n        <option value="SHA-1">SHA-1</option>\n        <option value="SHA-256">SHA-256</option>\n        <option value="SHA-384">SHA-384</option>\n        <option value="SHA-512">SHA-512</option>\n      </select>\n      \n    </div>\n    </article>\n    <hr/>\n    <article>\n      <header>\n        加解密\n      </header>\n      <button (click)="onCreateUserKeyClick()">创建秘钥</button>\n      <input type="text" [(ngModel)]="key"/>\n      <div>publicKey:{{publicKey|json}}</div>\n      <div>privateKey:{{privateKey|json}}</div>\n    <div class="select">\n      <label for="crypto">算法</label>\n      <select id="crypto" [(ngModel)]="cryptoAlgorithm" (change)="onCryptoAlgorithmChange()">\n        <optgroup label="对称">\n          <option value="AES-CTR">AES-CTR</option>\n          <option value="AES-CBC">AES/CBC/PKCS7Padding,Java需要BouncyCastleProvider(bcprov-jdk16)</option>\n          <option value="AES-GCM">AES-GCM</option>\n        </optgroup>\n        <optgroup label="非对称">\n          <option value="RSA-OAEP">AES-OAEP</option>\n        </optgroup>\n      </select>\n      <button (click)="onDecryptClick()">解密</button>\n    </div>\n    </article>\n  '}),o.c("design:paramtypes",[i.a])],t)})()},"5pK3":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n("WVK8"),r=n("vJEw"),i=(function(){function t(){this.crypto=window.crypto}return t.prototype.genRandomNumbers=function(t){return this.crypto.getRandomValues(t)},t.prototype.encrypt=function(t,e,n){return this.crypto.subtle.encrypt(t,e,n)},t.prototype.decrypt=function(t,e,n){return this.crypto.subtle.decrypt(t,e,n)},t.prototype.digest=function(t,e){return this.crypto.subtle.digest(t,e)},t.prototype.deriveKey=function(t,e,n,o,r){return this.crypto.subtle.deriveKey(t,e,n,o,r)},t.prototype.exportKey=function(t,e){return this.crypto.subtle.exportKey(t,e)},t.prototype.importKey=function(t,e,n,o,r){return this.crypto.subtle.importKey(t,e,n,o,r)},t.prototype.generateKey=function(t,e,n){return this.crypto.subtle.generateKey(t,e,n)},t.prototype.sign=function(t,e,n){return this.crypto.subtle.sign(t,e,n)},t.prototype.verify=function(t,e,n,o){return this.crypto.subtle.verify(t,e,n,o)},t.prototype.unwrapKey=function(t,e,n,o,r,i,c){return this.crypto.subtle.unwrapKey(t,e,n,o,r,i,c)},t.prototype.wrapKey=function(t,e,n,o){return this.crypto.subtle.wrapKey(t,e,n,o)},t.prototype.getRandomValues=function(t){return this.crypto.getRandomValues(t)},t=o.b([n.i(r.c)()],t)})()},DQ2p:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("DegS");n.d(e,"CryptoModule",(function(){return o.a}))},DegS:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o=n("WVK8"),r=n("Tb5a"),i=n("FvgR"),c=n("vJEw"),p=n("TBLV"),s=n("IUPD"),y=n("1cOA"),a=n("5pK3");console.log("`Person CURD` bundle loaded asynchronously");var u=(function(){function t(){}return t.routes=s.a,t=o.b([n.i(c.z)({declarations:[y.a],imports:[r.d,i.a,p.a.forChild(s.a)],providers:[a.a]})],t)})()},IUPD:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("1cOA"),r=[{path:"",component:o.a,pathMatch:"full"}]}});