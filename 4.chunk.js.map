{"version":3,"file":"4.chunk.js","sources":["webpack:///./src/app/+demo/+indexeddb/indexeddb.component.ts","webpack:///./src/app/+demo/+indexeddb/indexeddb.person.service.ts","webpack:///./src/app/+demo/+indexeddb/index.ts","webpack:///./src/app/+demo/+indexeddb/indexeddb.module.ts","webpack:///./src/app/+demo/+indexeddb/indexeddb.person.entity.ts","webpack:///./src/app/+demo/+indexeddb/indexeddb.person.form.component.ts","webpack:///./src/app/+demo/+indexeddb/indexeddb.person.list.component.ts","webpack:///./src/app/+demo/+indexeddb/indexeddb.routes.ts"],"sourcesContent":["import {\n  Component,\n  OnInit,\n} from '@angular/core';\nimport { Person } from './indexeddb.person.entity';\nimport { PersonService } from './indexeddb.person.service';\n\n@Component({\n  selector: 'indexeddb',\n  template: `\n    <h1>single page of Indexed DB </h1>\n    <person-form [person]=\"selected\" (onsave)=\"onSaveEvent($event)\"></person-form>\n    <hr/>\n    <person-list [persons]=\"persons\" (onselect) = onSelectEvent($event)></person-list>\n    <div>\n      <span>自动插入条数</span>\n      <input type=\"number\" style=\"width:50px\" [(ngModel)]=\"count\"/>\n      <button (click)=\"onInsertButtonClick()\" >确定</button>\n      <button (click)=\"onCleanButtonClick()\" >清除</button>\n    </div>\n  `,\n})\nexport class IndexedDBComponent implements OnInit {\n  public persons: Person[];\n  public selected: Person;\n  public count = 100 ;\n  constructor(private personService: PersonService) {\n  }\n  public ngOnInit() {\n    console.log('hello `Indexed DB` component');\n    this.personService.selectAll().then((persons: Person[]) => {\n      this.persons = persons;\n    });\n  }\n  public onSaveEvent(person) {\n    debugger;\n    this.personService.insert(person);\n  }\n\n  public onSelectEvent(person) {\n    this.selected = person;\n  }\n  public onInsertButtonClick() {\n    let ps = [];\n    for (let i = 0; i < this.count; i++) {\n      let person ={\n        id:i,\n        name:'name'+i,\n        code:'code'+i,\n        brithday:new Date(),\n        photo:new Blob([\"Hello World!\"],{type:\"text/plain\"})\n      };\n      ps.push(person);\n      // person.id = i;\n      // person.name='name'+i;\n      // person.brithday = new Date();\n      // person.code='code'+i;\n\n    }\n    let now = new Date().getTime();\n    this.personService.insert(ps).then(()=>{\n      alert(new Date().getTime() - now);\n    });\n  }\n  public onCleanButtonClick(){\n    let now = new Date().getTime();\n    this.personService.clear().then(()=>{\n      alert(new Date().getTime() - now);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// node_modules/_angular2-template-loader@0.6.2@angular2-template-loader!./src/app/+demo/+indexeddb/indexeddb.component.ts","import { Injectable } from '@angular/core';\nimport Dexie from 'dexie';\n// import { TypedJSON } from 'typedjson-npm';\nimport { Person } from './indexeddb.person.entity';\nimport { DexieService } from '../../core/dexie.service';\n\n@Injectable()\nexport class PersonService {\n  private table: Dexie.Table<Person, string>;\n\n  constructor(private dexieService: DexieService) {\n    this.table = this.dexieService.table('persons');\n  }\n\n  public selectAll() {\n    return this.table.toArray();\n  }\n\n  public insert(person:any|any[]) {\n    // let personJSON = JSON.parse(TypedJSON.stringify(person));\n    if(person instanceof Array){\n      return this.table.bulkAdd(person);\n    }else{\n      return this.table.add(person);\n    }\n  }\n  public clear(){\n    return this.table.clear();\n  }\n\n  public update(id, person: Person) {\n    return this.table.update(id, person);\n  }\n\n  public remove(id) {\n    return this.table.delete(id);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// node_modules/_angular2-template-loader@0.6.2@angular2-template-loader!./src/app/+demo/+indexeddb/indexeddb.person.service.ts","export { IndexedDBModule } from './indexeddb.module';\n\n\n\n// WEBPACK FOOTER //\n// node_modules/_angular2-template-loader@0.6.2@angular2-template-loader!./src/app/+demo/+indexeddb/index.ts","import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\n\nimport { routes } from './indexeddb.routes';\nimport { IndexedDBComponent } from './indexeddb.component';\nimport { PersonFormComponent } from './indexeddb.person.form.component';\nimport { PersonListComponent } from './indexeddb.person.list.component';\nimport { PersonService } from './indexeddb.person.service';\nconsole.log('`Person CURD` bundle loaded asynchronously');\n\n@NgModule({\n  declarations: [\n    IndexedDBComponent,\n    PersonFormComponent,\n    PersonListComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    RouterModule.forChild(routes),\n  ],\n  providers: [\n    PersonService\n  ]\n})\nexport class IndexedDBModule {\n  public static routes = routes;\n}\n\n\n\n// WEBPACK FOOTER //\n// node_modules/_angular2-template-loader@0.6.2@angular2-template-loader!./src/app/+demo/+indexeddb/indexeddb.module.ts","// import { JsonMember, JsonObject } from 'typedjson-npm';\n//\n// @JsonObject()\nexport class Person {\n  /**\n   * ID\n   */\n  private _id: number;\n  /**\n   * 编号\n   */\n  private _code: string;\n  /**\n   * 姓名\n   */\n  private _name: string;\n\n  /**\n   * 体重\n   */\n  private _weight: number;\n  /**\n   * 生日\n   */\n  private _brithday: Date;\n  /**\n   *  简历\n   */\n  private _resume: Blob;\n  /**\n   * 照片\n   */\n  private _photo: Blob;\n  /**\n   * 视频\n   */\n  private _video: Blob;\n  /**\n   * 录音\n   */\n  private _audio: Blob;\n\n  get id(): number {\n    return this._id;\n  }\n\n  // @JsonMember()\n  set id(value: number) {\n    this._id = value;\n  }\n\n  get code(): string {\n    return this._code;\n  }\n\n  // @JsonMember()\n  set code(value: string) {\n    this._code = value;\n  }\n\n  get name(): string {\n    return this._name;\n  }\n\n  // @JsonMember()\n  set name(value: string) {\n    this._name = value;\n  }\n\n  get photo(): Blob {\n    return this._photo;\n  }\n\n  // @JsonMember()\n  set photo(value: Blob) {\n    this._photo = value;\n  }\n\n  get weight(): number {\n    return this._weight;\n  }\n\n  // @JsonMember\n  set weight(value: number) {\n    this._weight = value;\n  }\n\n  get brithday(): Date {\n    return this._brithday;\n  }\n\n  // @JsonMember()\n  set brithday(value: Date) {\n    this._brithday = value;\n  }\n\n  get resume(): Blob {\n    return this._resume;\n  }\n\n  // @JsonMember()\n  set resume(value: Blob) {\n    this._resume = value;\n  }\n\n  get video(): Blob {\n    return this._video;\n  }\n\n  // @JsonMember()\n  set video(value: Blob) {\n    this._video = value;\n  }\n\n  get audio(): Blob {\n    return this._audio;\n  }\n\n  // @JsonMember()\n  set audio(value: Blob) {\n    this._audio = value;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// node_modules/_angular2-template-loader@0.6.2@angular2-template-loader!./src/app/+demo/+indexeddb/indexeddb.person.entity.ts","import {\n  Component,\n  OnInit,\n  Input,\n  Output,\n  EventEmitter\n} from '@angular/core';\n\nconsole.log('`indexeddb` component loaded asynchronously');\nimport { Person } from './indexeddb.person.entity';\n@Component({\n  selector: 'person-form',\n  template: `\n    <form>\n      <p>\n        <span>编码</span>\n        <input name=\"code\" [(ngModel)]=\"person.code\" type=\"text\"/>\n      </p>\n      <p>\n        <span>姓名</span>\n        <input name=\"name\" [(ngModel)]=\"person.name\" type=\"text\"/>\n      </p>\n      <p>\n        <span>体重</span>\n        <input name=\"weight\" [(ngModel)]=\"person.weight\" type=\"number\"/>\n      </p>\n      <p>\n        <span>生日</span>\n        <input name=\"brithday\" [(ngModel)]=\"person.brithday\" type=\"date\"/>\n      </p>\n      <p>\n        <span>简历</span>\n        <input name=\"resume\" [(ngModel)]=\"person.resume\" type=\"file\"/>\n      </p>\n      <p>\n        <span>照片</span>\n        <input name=\"photo\" [(ngModel)]=\"person.photo\" type=\"file\" accept=\"image/*\" capture=\"camera\"/>\n      </p>\n      <p>\n        <span>视频</span>\n        <input name=\"audio\" [(ngModel)]=\"person.audio\" type=\"file\" accept=\"video/*\" capture=\"camcorder\"/>\n      </p>\n      <p>\n        <span>录音</span>\n        <input name=\"audio\" [(ngModel)]=\"person.audio\" type=\"file\" accept=\"audio/*\" capture=\"microphone\"/>\n      </p>\n      <p>\n        <button type=\"submit\" (click)=\"onSaveButtonClick()\">保存</button>\n      </p>\n    </form>\n  `\n})\nexport class PersonFormComponent implements OnInit {\n\n  public person: Person = new Person();\n  @Input('person')\n  public editPerson:Person;\n  @Output('onsave')\n  public onsave = new EventEmitter<Person>();\n  public ngOnInit() {\n    console.log('hello `Indexed DB Form` component');\n  }\n  public onSaveButtonClick() {\n      this.onsave.emit(this.person);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// node_modules/_angular2-template-loader@0.6.2@angular2-template-loader!./src/app/+demo/+indexeddb/indexeddb.person.form.component.ts","import {\n  Component,\n  OnInit,\n  Input,\n  Output,\n  EventEmitter\n} from '@angular/core';\nimport { Person } from './indexeddb.person.entity';\nconsole.log('`indexeddb` component loaded asynchronously');\n\n@Component({\n  selector: 'person-list',\n  template: `\n    <table>\n      <tr *ngFor=\"let person of persons\" (click)=\"onPersonSelected(person)\">\n        <td>{{person.id}}</td>\n        <td>{{person.code}}</td>\n        <td>{{person.name}}</td>\n        <td>{{person.weight}}</td>\n        <td>{{person.brithday}}</td>\n        <td>{{person.photo}}</td>\n      </tr>\n    </table>\n  `,\n})\nexport class PersonListComponent implements OnInit {\n  @Input('persons')\n  public persons:Person[];\n  @Output('onselect')\n  public onselect = new EventEmitter<Person>();\n  public ngOnInit() {\n    console.log('hello `Indexed DB Form` component');\n  }\n  public onPersonSelected(person){\n    this.onselect.emit(person);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// node_modules/_angular2-template-loader@0.6.2@angular2-template-loader!./src/app/+demo/+indexeddb/indexeddb.person.list.component.ts","import { IndexedDBComponent } from './indexeddb.component';\n\nexport const routes = [\n  { path: '', component: IndexedDBComponent,  pathMatch: 'full' },\n];\n\n\n\n// WEBPACK FOOTER //\n// node_modules/_angular2-template-loader@0.6.2@angular2-template-loader!./src/app/+demo/+indexeddb/indexeddb.routes.ts"],"mappings":";;;;;;;;;;;AAAA;AAKA;AAiBA;AAIA;AAAA;AADA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/CA;AAfA;AACA;AACA;AAYA;AAKA;AAJA;AAgDA;AAAA;AAhDA;;;;;;;;;;;;;;ACtBA;AAIA;AAGA;AAGA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AA7BA;AADA;AAIA;AAHA;AA8BA;AAAA;AA9BA;;;;;;;;;ACPA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAiBA;AAAA;AAEA;AADA;AADA;AAfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAFA;;;;;;;;;AC3BA;AAAA;AACA;AACA;AACA;AAAA;AAuHA;AAhFA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AALA;AAOA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AALA;AAOA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AALA;AAOA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AALA;AAOA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AALA;AAOA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AALA;AAOA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AALA;AAOA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AALA;AAOA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AALA;AAMA;AAAA;;;;;;;;;;;;;;;AC1HA;AAQA;AACA;AA2CA;AA1CA;AA4CA;AAIA;AAOA;AANA;AACA;AACA;AACA;AACA;AACA;AARA;AADA;AACA;AAAA;AAEA;AADA;;AACA;AANA;AA1CA;AACA;AACA;AAuCA;AACA;AAaA;AAAA;AAbA;;;;;;;;;;;;;ACpDA;AAQA;AAiBA;AAfA;AAmBA;AAOA;AANA;AACA;AACA;AACA;AACA;AACA;AARA;AADA;;AACA;AAEA;AADA;;AACA;AAJA;AAfA;AACA;AACA;AAYA;AACA;AAWA;AAAA;AAXA;;;;;;;;;ACzBA;AAAA;AAAA;AAEA;AACA;AACA;;;;;A","sourceRoot":""}